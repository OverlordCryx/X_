local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local field = workspace.Stadium.Field.Bounds.Field
local anti = field:Clone()
anti.Name = "ANTI"
anti.Parent = field.Parent
local teleportPosition = Vector3.new(90, 6, -239)
local allowedTeams = {
	["Home"] = true,
	["Away"] = true
}
local outsideTime = 0
local maxOutsideTime = 6
local alreadyTeleported = false
local function isInside(part, position)
	local size = part.Size
	local cf = part.CFrame
	local relative = cf:PointToObjectSpace(position)
	return math.abs(relative.X) <= size.X / 2
	and math.abs(relative.Y) <= size.Y / 2
	and math.abs(relative.Z) <= size.Z / 2
end
RunService.Heartbeat:Connect(function(deltaTime)
	if not player.Character then return end
	if not player.Team then return end
	if not allowedTeams[player.Team.Name] then
		outsideTime = 0
		alreadyTeleported = false
		return
	end
	local hrp = player.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end
	if not isInside(anti, hrp.Position) then
		outsideTime += deltaTime
		if outsideTime >= maxOutsideTime and not alreadyTeleported then
			alreadyTeleported = true
			for i = 1, 220 do
				hrp.CFrame = CFrame.new(teleportPosition)
				task.wait(0.01)
			end
		end
	else
		outsideTime = 0
		alreadyTeleported = false
	end
end)
